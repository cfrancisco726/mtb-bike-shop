/*! For license information please see extend-analytics-sdk.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ExtendAnalytics=t():e.ExtendAnalytics=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t,r){"use strict";var n,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageKeys=t.Environment=t.APIVersion=void 0,t.APIVersion=n,function(e){e.Version20200801="2020-08-01"}(n||(t.APIVersion=n={})),t.Environment=o,function(e){e.dev="dev",e.acceptance="acceptance",e.demo="demo",e.production="production",e.stage="stage",e.merchantssandbox="merchantssandbox",e.partnerssandbox="partnerssandbox"}(o||(t.Environment=o={})),t.LocalStorageKeys=a,function(e){e.ProductsWithWarranties="productsWithWarranties",e.Products="products",e.SdkMigrationVersion="sdkMigrationVersion",e.TrackedUser="trackedUser",e.TrackedCart="trackedCart"}(a||(t.LocalStorageKeys=a={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e,t){if(u[e]=a(a({},u[e]),t),d()){var r=JSON.stringify(u);window.localStorage.setItem(c,r)}},t.get=function(e,t){if(d()){var r=window.localStorage.getItem(c);if(r)return t?JSON.parse(r)[e][t]:JSON.parse(r)[e]}return t?u[e][t]:u[e]},t.getAll=function(){if(d()){var e=window.localStorage.getItem(c);if(e)return JSON.parse(e)}return u},t.remove=function(e,t){if(delete u[e][t],d()){var r=JSON.stringify(u);window.localStorage.setItem(c,r)}},t.update=function(e,t,r){u[e][t]=a(a({},u[e][t]),r),d()&&window.localStorage.setItem(c,JSON.stringify(u))},t.clear=function(){if(u={products:{},productsWithWarranties:{},trackedUser:{},trackedCart:{},sdkMigrationVersion:{}},d()){var e=JSON.stringify(u);window.localStorage.setItem(c,e)}},t.initStorageObject=function(){if(d()){var e=window.localStorage.getItem(c);if(e)try{u=JSON.parse(e)}catch(e){n.globalConfig.get("debug")&&console.error("Extend Analytics SDK: invalid structure for _extendAnalytics, deleting it")}}},t.localStorageSupported=d;var n=r(5);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c="_extendAnalytics",u={products:{},productsWithWarranties:{},trackedUser:{},trackedCart:{},sdkMigrationVersion:{}};function d(){return void 0!==window.localStorage&&null!=window.localStorage}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnalyticsEvent=function(e){var t={userId:(0,a.getUserIdentifier)(),eventName:e.eventName,properties:e.properties,timestamp:Date.now(),context:(0,a.getContext)(),storeId:o.globalConfig.get("storeId"),cartId:(0,a.getCartIdentifier)(),sessionState:(0,a.getSessionState)(),platform:o.globalConfig.get("platform")||"extend-analytics-sdk"};if(!t.userId)return;(0,n.postTracking)({type:"analytics",object:t})},t.createErrorEvent=function(e){var t=e.error,r=e.type,i={error:t,type:r,context:(0,a.generateErrorContext)(),storeId:o.globalConfig.get("storeId")};(0,n.postTracking)({type:"sdk-error",object:i})};var n=r(18),o=r(5),a=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorLogger=function(e){var t=e.type,r=e.error;n.globalConfig.get("debug")?console.log({type:t,error:r}):(0,o.createErrorEvent)({type:t,error:r})};var n=r(5),o=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateOfferType=function(e){return!!e&&(o.indexOf(e.area)>-1&&a.indexOf(e.component)>-1)},t.validateLinkEvent=function(e){return!!e&&u.indexOf(e)>-1},t.validateLinkType=function(e){return!!e&&(i.indexOf(e.area)>-1&&c.indexOf(e.component)>-1)},t.validateQuantity=function(e){if("number"!=typeof e)return(0,n.errorLogger)({type:"invalid_quantity",error:{functionContext:"validateQuantity",message:"Quantity is not a number: ".concat(e)}}),!1;if("number"==typeof e&&e<0)return(0,n.errorLogger)({type:"invalid_quantity",error:{functionContext:"validateQuantity",message:"Quantity must be greater than 0: ".concat(e)}}),!1;return!0},t.VALID_LINK_EVENT_TYPES=t.VALID_LINK_COMPONENT_TYPES=t.VALID_LINK_AREA_TYPES=t.VALID_OFFER_COMPONENT_TYPES=t.VALID_OFFER_AREA_TYPES=void 0;var n=r(3),o=["product_page","product_modal","collection","cart_page","cart_page_load","app","post_purchase_modal"];t.VALID_OFFER_AREA_TYPES=o;var a=["buttons","modal","app"];t.VALID_OFFER_COMPONENT_TYPES=a;var i=["product_page","cart_page","learn_more_modal","offer_modal","simple_offer_modal","post_purchase_modal"];t.VALID_LINK_AREA_TYPES=i;var c=["learn_more_info_icon","learn_more_info_link","see_plan_details_link"];t.VALID_LINK_COMPONENT_TYPES=c;var u=["learn_more_clicked","plan_details_clicked"];t.VALID_LINK_EVENT_TYPES=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalConfig=void 0;var n={},o={get:function(e){return n[e]},set:function(e,t){n[e]=t},reset:function(){n={}},toJSON:function(){return JSON.parse(JSON.stringify(n))}};t.globalConfig=o},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSessionState=function(){var e=o.getAll();return e[a.LocalStorageKeys.Products]=Object.keys(e[a.LocalStorageKeys.Products]).map((function(t){return e[a.LocalStorageKeys.Products][t]})),e[a.LocalStorageKeys.ProductsWithWarranties]=Object.keys(e[a.LocalStorageKeys.ProductsWithWarranties]).map((function(t){return e[a.LocalStorageKeys.ProductsWithWarranties][t]})),e},t.getAllTrackedOffers=function(){var e=o.getAll()[a.LocalStorageKeys.ProductsWithWarranties];return Object.keys(e).map((function(t){return e[t]}))},t.getAllTrackedProducts=function(){var e=o.getAll()[a.LocalStorageKeys.Products];return Object.keys(e).map((function(t){return e[t]}))},t.getContext=function(){return{referrer:document.referrer,userAgent:window.navigator.userAgent,url:window.location.href}},t.getUserIdentifier=function(){var e=o.get(a.LocalStorageKeys.TrackedUser);return Object.keys(e).length?e.userId:null},t.setUserIdentifier=function(){o.set(a.LocalStorageKeys.TrackedUser,{userId:(0,i.uuid)()})},t.getCartIdentifier=function(){var e=o.get(a.LocalStorageKeys.TrackedCart);return Object.keys(e).length?e.cartId:null},t.setCartIdentifier=function(){o.set(a.LocalStorageKeys.TrackedCart,{cartId:(0,i.uuid)()})},t.getSdkMigrationVersion=function(){var e=o.get(a.LocalStorageKeys.SdkMigrationVersion);return Object.keys(e).length?e.version:null},t.setSdkMigrationVersion=function(e){o.set(a.LocalStorageKeys.SdkMigrationVersion,{version:e})},t.generateErrorContext=function(){return{sdkName:"extend-analytics-sdk",sdkVersion:"1.3.8",browser:{currentUrl:window.location.href,userAgent:window.navigator.userAgent}}},t.getExtendApiHost=function(){var e=c.globalConfig.get("environment");return e?"api-".concat(e,".helloextend.com"):"api.helloextend.com"};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(1)),a=r(0),i=r(26),c=r(5);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTrackedOffer=function(e){var t=e.productId,r=e.planId;return(0,o.get)(n.LocalStorageKeys.ProductsWithWarranties,"".concat(t,"::").concat(r))};var n=r(0),o=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeTrackedProduct=function(e){var t=e.productId;(0,n.remove)(o.LocalStorageKeys.Products,t)};var n=r(1),o=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTrackedProduct=function(e){var t=e.productId;return(0,o.get)(n.LocalStorageKeys.Products,t)};var n=r(0),o=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTrackedProduct=function(e){var t=e.productId,r=e.productQuantity,a=(0,n.get)(o.LocalStorageKeys.Products,t);a&&Object.keys(a).length&&(r+=a.productQuantity);(0,n.set)(o.LocalStorageKeys.Products,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},t,{productId:t.toString(),productQuantity:r}))};var n=r(1),o=r(0)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(o=window)}e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeTrackedOffer=function(e){var t=e.productId,r=e.planId;(0,n.remove)(o.LocalStorageKeys.ProductsWithWarranties,"".concat(t,"::").concat(r))};var n=r(1),o=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackOfferRemovedFromCart=function(e){var t=e.productId,r=e.planId,u=e.token;if(!t||!r)return void(0,c.errorLogger)({type:"method_missing_param",error:{functionContext:"trackOfferRemovedFromCart",message:"Missing arguments. Expected: { productId, planId }"}});var d=(0,a.getTrackedOffer)({productId:t,planId:r});if(!d)return void(0,c.errorLogger)({type:"tracked_data_unavailable",error:{functionContext:"trackOfferRemovedFromCart",message:"No tracked offer exists to remove"}});(0,o.removeTrackedOffer)({productId:t,planId:r}),(0,i.setTrackedProduct)({productId:t,productQuantity:d.productQuantity}),(0,n.createAnalyticsEvent)({eventName:"offer_removed_from_cart",properties:{productId:t.toString(),planId:r,token:u}})};var n=r(2),o=r(12),a=r(7),i=r(10),c=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackProductRemovedFromCart=function(e){var t=e.productId,r=e.token;if(!t)return void(0,i.errorLogger)({type:"method_missing_param",error:{functionContext:"trackProductRemovedFromCart",message:"Missing arguments. Expected: { productId }"}});if(!(0,a.getTrackedProduct)({productId:t}))return void(0,i.errorLogger)({type:"tracked_data_unavailable",error:{functionContext:"trackProductRemovedFromCart",message:"No tracked product to remove"}});(0,o.removeTrackedProduct)({productId:t}),(0,n.createAnalyticsEvent)({eventName:"product_removed",properties:{productId:t.toString(),token:r}})};var n=r(2),o=r(8),a=r(9),i=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ExtendAnalytics:!0,ExtendPublicInterface:!0};Object.defineProperty(t,"ExtendAnalytics",{enumerable:!0,get:function(){return o.ExtendAnalytics}}),Object.defineProperty(t,"ExtendPublicInterface",{enumerable:!0,get:function(){return o.ExtendPublicInterface}});var o=r(16),a=r(0);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendAnalytics=void 0;var o=r(5),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(1)),i=r(17),c=r(27),u=r(28),d=r(30),s=r(13),f=r(31),l=r(32),p=r(14),y=r(33),v=r(6);function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}var m={getVersion:function(){return"1.3.8"},config:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(void 0===e)return o.globalConfig.toJSON();if(null!==e){e.environment&&o.globalConfig.set("environment",e.environment),(0,v.getSdkMigrationVersion)()||(0,v.setSdkMigrationVersion)(this.getVersion()),a.initStorageObject();var t=e.storeId,r=e.debug,n=e.platform;t&&o.globalConfig.set("storeId",t),n&&o.globalConfig.set("platform",n),void 0!==r&&(o.globalConfig.set("debug",r),r&&console.log("Extend analytics debug mode is now enabled")),(0,v.getUserIdentifier)()||(0,v.setUserIdentifier)(),(0,v.getCartIdentifier)()||(0,v.setCartIdentifier)()}else o.globalConfig.reset()})),trackOfferViewed:i.trackOfferViewed,trackCartCheckout:c.trackCartCheckout,trackOfferAddedToCart:u.trackOfferAddedToCart,trackOfferRemovedFromCart:s.trackOfferRemovedFromCart,trackOfferUpdated:d.trackOfferUpdated,trackProductAddedToCart:f.trackProductAddedToCart,trackProductUpdated:l.trackProductUpdated,trackProductRemovedFromCart:p.trackProductRemovedFromCart,trackLinkClicked:y.trackLinkClicked};t.ExtendAnalytics=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackOfferViewed=function(e){var t=e.productId,r=e.offerType,i=e.token;if(!t||!r)return void(0,a.errorLogger)({type:"method_missing_param",error:{functionContext:"trackOfferViewed",message:"Missing arguments. Expected: { productId, offerType }"}});if(!(0,o.validateOfferType)(r))return void(0,a.errorLogger)({type:"invalid_offer_type",error:{functionContext:"trackOfferViewed",message:"Invalid offerType. Please check the documentation or contact support."}});(0,n.createAnalyticsEvent)({eventName:"offer_viewed",properties:{productId:t.toString(),offerType:r,token:i}})};var n=r(2),o=r(4),a=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postTracking=function(e){var t="https://".concat((0,a.getExtendApiHost)(),"/tracking");if(o.globalConfig.get("debug"))return void console.log(e);(0,n.postJSON)(t,e)};var n=r(19),o=r(5),a=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJSON=function(e){return new o.default((function(t,r){var n=new XMLHttpRequest;n.addEventListener("load",(function(){t({status:n.status,data:n.response})})),n.addEventListener("error",r),n.open("GET",e,!0),n.setRequestHeader("Accept","application/json; version=".concat(a.APIVersion.Version20200801,";")),n.responseType="json",n.send()}))},t.postJSON=function(e,t){return new o.default((function(r,n){var o=new XMLHttpRequest;o.addEventListener("load",(function(){r({status:o.status,data:o.response})})),o.addEventListener("error",n),o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(t))}))};var n,o=(n=r(20))&&n.__esModule?n:{default:n},a=r(0)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(24)),o=a(r(25));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=setTimeout;function u(e){return Boolean(e&&void 0!==e.length)}function d(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(e,this)}function f(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn((function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void p(t.promise,e)}l(t.promise,n)}else(1===e._state?l:p)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===i(t)||"function"==typeof t)){var r=t.then;if(t instanceof s)return e._state=3,e._value=t,void y(e);if("function"==typeof r)return void g((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,y(e)}catch(t){p(e,t)}var n,o}function p(e,t){e._state=2,e._value=t,y(e)}function y(e){2===e._state&&0===e._deferreds.length&&s._immediateFn((function(){e._handled||s._unhandledRejectionFn(e._value)}));for(var t=0,r=e._deferreds.length;t<r;t++)f(e,e._deferreds[t]);e._deferreds=null}function v(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function g(e,t){var r=!1;try{e((function(e){r||(r=!0,l(t,e))}),(function(e){r||(r=!0,p(t,e))}))}catch(e){if(r)return;r=!0,p(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var r=new this.constructor(d);return f(this,new v(e,t,r)),r},s.prototype.finally=n.default,s.all=function(e){return new s((function(t,r){if(!u(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function a(e,c){try{if(c&&("object"===i(c)||"function"==typeof c)){var u=c.then;if("function"==typeof u)return void u.call(c,(function(t){a(e,t)}),r)}n[e]=c,0==--o&&t(n)}catch(e){r(e)}}for(var c=0;c<n.length;c++)a(c,n[c])}))},s.allSettled=o.default,s.resolve=function(e){return e&&"object"===i(e)&&e.constructor===s?e:new s((function(t){t(e)}))},s.reject=function(e){return new s((function(t,r){r(e)}))},s.race=function(e){return new s((function(t,r){if(!u(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,o=e.length;n<o;n++)s.resolve(e[n]).then(t,r)}))},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){c(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var m=s;t.default=m}).call(this,r(21).setImmediate)},function(e,t,r){"use strict";(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new a(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(22),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}).call(this,r(11))},function(e,t,r){"use strict";(function(e,t){!function(e,r){if(!e.setImmediate){var n,o,a,i,c,u=1,d={},s=!1,f=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){y(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){y(e.data)},n=function(e){a.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(y,0,e)}:(i="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&y(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),n=function(t){e.postMessage(i+t,"*")}),l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return d[u]=o,n(u),u++},l.clearImmediate=p}function p(e){delete d[e]}function y(e){if(s)setTimeout(y,0,e);else{var t=d[e];if(t){s=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{p(e),s=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,r(11),r(23))},function(e,t,r){"use strict";var n,o,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(e){o=c}}();var d,s=[],f=!1,l=-1;function p(){f&&d&&(f=!1,d.length?s=d.concat(s):l=-1,s.length&&y())}function y(){if(!f){var e=u(p);f=!0;for(var t=s.length;t;){for(d=s,s=[];++l<t;)d&&d[l].run();l=-1,t=s.length}d=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new v(e,t)),1!==s.length||f||u(y)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){return t.reject(r)}))}))};t.default=n},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){return new this((function(t,r){if(!e||void 0===e.length)return r(new TypeError(n(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var a=o.length;function i(e,r){if(r&&("object"===n(r)||"function"==typeof r)){var c=r.then;if("function"==typeof c)return void c.call(r,(function(t){i(e,t)}),(function(r){o[e]={status:"rejected",reason:r},0==--a&&t(o)}))}o[e]={status:"fulfilled",value:r},0==--a&&t(o)}for(var c=0;c<o.length;c++)i(c,o[c])}))};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=function(e,t){var r,o=n,a=[],i=t||o.length;if(e)for(r=0;r<e;r+=1)a[r]=o[0|Math.random()*i];else{var c;for(a[8]="-",a[13]="-",a[18]="-",a[23]="-",a[14]="4",r=0;r<36;r+=1)a[r]||(c=0|16*Math.random(),a[r]=o[19===r?3&c|8:c])}return a.join("")};var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackCartCheckout=function(e){var t=(0,i.getAllTrackedOffers)(),r=(0,i.getAllTrackedProducts)();if(0===t.length&&0===r.length)return void(0,u.errorLogger)({type:"tracked_data_unavailable",error:{functionContext:"trackCartCheckout",message:"No tracked offers or products were found"}});if(t.forEach((function(e){(0,n.createAnalyticsEvent)({eventName:"offer_sold",properties:e}),(0,o.removeTrackedOffer)(e)})),r.forEach((function(e){(0,n.createAnalyticsEvent)({eventName:"product_sold",properties:e}),(0,a.removeTrackedProduct)(e)})),e&&e.cartTotal){if(!(0,c.validateQuantity)(e.cartTotal))return void(0,u.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackCartCheckout",message:"Invalid cartTotal passed to trackCartCheckout"}});(0,n.createAnalyticsEvent)({eventName:"total_cart_revenue",properties:{cartTotal:e.cartTotal}})}(0,i.setCartIdentifier)()};var n=r(2),o=r(12),a=r(8),i=r(6),c=r(4),u=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackOfferAddedToCart=function(e){var t=e.productId,r=e.productQuantity,s=e.warrantyQuantity,f=e.offerType,l=e.planId,p=e.token;if(!(t&&r&&l&&f&&s))return void(0,d.errorLogger)({type:"method_missing_param",error:{functionContext:"trackOfferAddedToCart",message:"Missing arguments. Expected: { productId, productQuantity, warrantyQuantity, planId, offerType }"}});if(!(0,u.validateQuantity)(r))return void(0,d.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackOfferAddedToCart",message:"Invalid productQuantity"}});if(!(0,u.validateQuantity)(s))return void(0,d.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackOfferAddedToCart",message:"Invalid warrantyQuantity"}});if(!(0,u.validateOfferType)(f))return void(0,d.errorLogger)({type:"invalid_offer_type",error:{functionContext:"trackOfferAddedToCart",message:"Invalid offerType. Please check the documentation or contact support."}});if(s>r)return void(0,d.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackOfferAddedToCart",message:"warrantyQuantity cannot be greater than the product quantity"}});var y=(0,a.getTrackedProduct)({productId:t}),v=(0,c.getTrackedOffer)({productId:t,planId:l});y&&Object.keys(y).length?(0,i.removeTrackedProduct)({productId:t}):y||v||(0,n.createAnalyticsEvent)({eventName:"product_added_to_cart",properties:{productId:t.toString(),productQuantity:r,token:p}});(0,o.setTrackedOffer)({productId:t,productQuantity:r,offerType:f,planId:l,warrantyQuantity:s}),(0,n.createAnalyticsEvent)({eventName:"offer_added_to_cart",properties:{productId:t.toString(),productQuantity:r,warrantyQuantity:s,offerType:f,planId:l,token:p}})};var n=r(2),o=r(29),a=r(9),i=r(8),c=r(7),u=r(4),d=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTrackedOffer=function(e){var t=e.productId,r=e.offerType,i=e.planId,c=e.productQuantity,u=e.warrantyQuantity,d=c,s=u,f=(0,a.getTrackedOffer)({productId:t,planId:i});f&&(d+=f.productQuantity,s+=f.warrantyQuantity);(0,n.set)(o.LocalStorageKeys.ProductsWithWarranties,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},"".concat(t,"::").concat(i),{offerType:r,planId:i,productId:t.toString(),productQuantity:d,warrantyQuantity:s}))};var n=r(1),o=r(0),a=r(7)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackOfferUpdated=function(e){var t=e.productId,r=e.planId,f=e.updates,p=void 0===f?{}:f,y=e.token;if(!t||!r||!p)return void(0,s.errorLogger)({type:"method_missing_param",error:{functionContext:"trackOfferUpdated",message:"Missing arguments. Expected: {productId, planId, updates}"}});var v=Object.prototype.hasOwnProperty.call(p,"productQuantity"),g=Object.prototype.hasOwnProperty.call(p,"warrantyQuantity");if(!g&&!v)return void(0,s.errorLogger)({type:"method_missing_param",error:{functionContext:"trackOfferUpdated",message:"Missing update arguments. Expected: {productQuantity, warrantyQuantity}"}});if(p.warrantyQuantity&&!(0,d.validateQuantity)(p.warrantyQuantity))return void(0,s.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackOfferUpdated",message:"Invalid warrantyQuantity"}});if(p.productQuantity&&!(0,d.validateQuantity)(p.productQuantity))return void(0,s.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackOfferUpdated",message:"Invalid productQuantity"}});var m=(0,i.getTrackedOffer)({productId:t,planId:r});if(!m)return void(0,s.errorLogger)({type:"tracked_data_unavailable",error:{functionContext:"trackOfferUpdated",message:"No tracked offer found to be updated"}});if(v&&g&&p.warrantyQuantity&&p.productQuantity&&p.warrantyQuantity>p.productQuantity)return void(0,s.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackOfferUpdated",message:"updated warrantyQuantity is greater than the updated product quantity"}});if(g&&!v&&p.warrantyQuantity&&p.warrantyQuantity>m.productQuantity)return void(0,s.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackOfferUpdated",message:"updated warrantyQuantity is greater than the stored tracked offer product quantity"}});(0,a.createAnalyticsEvent)({eventName:"offer_updated",properties:{productId:t.toString(),planId:r,oldQuantities:{productQuantity:m.productQuantity,warrantyQuantity:m.warrantyQuantity},newQuantities:l({},p),token:y}}),v&&0===p.productQuantity?(0,c.trackOfferRemovedFromCart)({productId:t,planId:r}):g&&0===p.warrantyQuantity?((0,c.trackOfferRemovedFromCart)({productId:t,planId:r}),p.productQuantity&&p.productQuantity>0?(0,u.setTrackedProduct)({productId:t,productQuantity:p.productQuantity}):(0,u.setTrackedProduct)({productId:t,productQuantity:m.productQuantity})):(0,n.update)(o.LocalStorageKeys.ProductsWithWarranties,"".concat(t,"::").concat(r),p)};var n=r(1),o=r(0),a=r(2),i=r(7),c=r(13),u=r(10),d=r(4),s=r(3);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackProductAddedToCart=function(e){var t=e.productId,r=e.productQuantity,c=e.token;if(!t||!r)return void(0,i.errorLogger)({type:"method_missing_param",error:{functionContext:"trackProductAddedToCart",message:"Missing arguments. Expected: { productId, productQuantity }"}});if(!(0,o.validateQuantity)(r))return void(0,i.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackProductAddedToCart",message:"Invalid productQuantity"}});(0,a.setTrackedProduct)({productId:t,productQuantity:r}),(0,n.createAnalyticsEvent)({eventName:"product_added_to_cart",properties:{productId:t.toString(),productQuantity:r,token:c}})};var n=r(2),o=r(4),a=r(10),i=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackProductUpdated=function(e){var t=e.productId,r=e.updates,s=e.token;if(!t||!r)return void(0,d.errorLogger)({type:"method_missing_param",error:{functionContext:"trackProductUpdated",message:"Missing arguments. Expected: { productId, updates }"}});if(r.productQuantity&&!(0,u.validateQuantity)(r.productQuantity))return void(0,d.errorLogger)({type:"invalid_quantity",error:{functionContext:"trackProductUpdated",message:"Invalid productQuantity passed to trackOfferUpdated"}});var f=(0,a.getTrackedProduct)({productId:t});if(!f)return void(0,d.errorLogger)({type:"tracked_data_unavailable",error:{functionContext:"trackProductUpdated",message:"No tracked product found to be updated"}});(0,c.update)(n.LocalStorageKeys.Products,t,r),(0,o.createAnalyticsEvent)({eventName:"product_updated",properties:{productId:t.toString(),oldProductQuantity:f.productQuantity,newProductQuantity:r.productQuantity,token:s}}),0===r.productQuantity&&(0,i.trackProductRemovedFromCart)({productId:t})};var n=r(0),o=r(2),a=r(9),i=r(14),c=r(1),u=r(4),d=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackLinkClicked=function(e){var t=e.linkEvent,r=e.productId,i=e.linkType,c=e.token;if(!t||!r||!i)return void(0,n.errorLogger)({type:"method_missing_param",error:{functionContext:"trackLinkClicked",message:"Missing arguments. Expected: { linkEvent, productId, linkType }"}});if(!(0,a.validateLinkEvent)(t))return void(0,n.errorLogger)({type:"invalid_link_event",error:{functionContext:"trackLinkClicked",message:"Invalid linkEvent. Please check the documentation or contact support."}});if(!(0,a.validateLinkType)(i))return void(0,n.errorLogger)({type:"invalid_link_type",error:{functionContext:"trackLinkClicked",message:"Invalid linkType. Please check the documentation or contact support."}});(0,o.createAnalyticsEvent)({eventName:"link_clicked",properties:{linkEvent:t,productId:r.toString(),linkType:i,token:c}})};var n=r(3),o=r(2),a=r(4)}]).ExtendAnalytics}));